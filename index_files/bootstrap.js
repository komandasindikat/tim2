!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}function i(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function n(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}Object.create;Object.create;class r{constructor(e){const t=r.RFC_3986.exec(e);if(!t)throw new Error("Invalid Uri: "+e);const[,,i,,n,s,,a,,c]=t;this.scheme=i,this.authority=n?new o(n):void 0,this.path=s,this.query=a,this.fragment=c}toString(){const e=[];return void 0!==this.scheme&&e.push(this.scheme,":"),void 0!==this.authority&&e.push("//",this.authority.toString()),e.push(this.path),void 0!==this.query&&e.push("?",this.query),void 0!==this.fragment&&e.push("#",this.fragment),e.join("")}get host(){return this.authority&&this.authority.host}get port(){return this.authority&&this.authority.port}get userInfo(){return this.authority&&this.authority.userInfo}}r.RFC_3986=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class o{constructor(e){const t=o.RFC_3986.exec(e);if(!t)throw new Error("Invalid Authority: "+e);const[,i,n,r]=t;this.userInfo=i,this.host=n,this.port=r}toString(){const e=[];return void 0!==this.userInfo&&e.push(this.userInfo,"@"),void 0!==this.host&&e.push(this.host),void 0!==this.port&&e.push(":",this.port),e.join("")}}o.RFC_3986=/(?:([^@]+)@)?([^:]+)(?::([\d]+))?/;var s=function(){var t=this,i={exports:this};function r(e){switch(typeof e){case"undefined":return!0;case"string":return""===e.trim();case"number":return isNaN(e);case"object":if(null==e)return!0;if(e.constructor===Object)return 0===Object.keys(e).length;if(Array.isArray(e))return 0===e.length}return!1}t.__esModule=!0,t.isEmpty=r;t.Strings=class{static noWhitespace(e){return e&&"string"==typeof e?e.replace(/\s+/g,""):""}static startWith(e,t){return e?e.substring(0,t.length)===t:e===t}static endsWith(e,t){return e.substring(e.length-t.length,e.length)===t}static isEmpty(e){return null==e||0===e.trim().length}static isLowerCase(e){return e===e.toLowerCase()&&e!==e.toUpperCase()}static isUpperCase(e){return e===e.toUpperCase()&&e!==e.toLowerCase()}static kebabCase(e){return e.replace(/([A-Z][a-z]+)/g,"$1-").toLowerCase().replace(/-$/,"")}};class o{static keys(e){return Object.keys(e)}static values(e){return Object.keys(e).map((t=>e[t]))}static entries(e){return Object.keys(e).map((t=>[t,e[t]]))}static removeEmpty(e){return e&&e.constructor===Object?Object.keys(e).reduce(((t,i)=>{const n=o.removeEmpty(e[i]);return r(n)||(t[i]=n),t}),{}):e}static sort(e){return e?Array.isArray(e)?e.map(o.sort):e.constructor===Object?Object.keys(e).sort().reduce(((t,i)=>{const n=e[i];return t[i]=o.sort(n),t}),{}):e:e}static toLowerCase(e){return"string"==typeof e?e.toLowerCase():Array.isArray(e)?e.map(o.toLowerCase):a((()=>e.constructor===Object))?Object.entries(e).reduce(((e,[t,i])=>(e[t]=o.toLowerCase(i),e)),{}):e}static omit(e,...t){return t.reduce(((e,t)=>(Reflect.deleteProperty(e,t),e)),e)}static pick(e,...t){return t.reduce(((t,i)=>(t[i]=e[i],t)),{})}}t.Objects=o;t.Maps=class{static entries(e){if(e.entries)return e.entries();const t=[];return e.forEach(((e,i)=>{t.push([i,e])})),t}};class s{static from(e){return Array.from(e)}static find(e,t){if(e.find)return e.find(t);const[i]=e.filter(t);return i}static toObject(e){return e.reduce(((e,t)=>(Object.keys(t).forEach((i=>{i in e||(e[i]=t[i])})),e)),{})}static flatten(e){return e.reduce(((e,t)=>e.concat(t)),[])}static flatMap(e,t){return e.flatMap?e.flatMap(t):s.flatten(e.map(t))}static unique(e){return Array.from(new Set(e))}static clean(e){return e.filter(Boolean)}static trim(e){return e.map((e=>e.trim()))}static includes(e,t){return"includes"in e?e.includes(t):-1!==e.indexOf(t)}static last(e){return e[e.length-1]}static safeReverse(e){return e?e.slice().reverse():[]}}t.Arrays=s;function a(e,t){try{const i=e();return void 0===i?t:i}catch(e){return t}}function c(e,t){const i=t.toLowerCase(),n=s.find(Object.keys(e),(e=>e.toLowerCase()===i));if(!n)return;const r=e[n];return"string"==typeof r?r.trim():r}function l(e,...t){if(!e)return[];if(Array.isArray(e))return s.clean(s.flatten(e.map((e=>l(e,...t)))));if("object"==typeof e){const[i,...n]=t,r=c(e,i);return"object"==typeof r?l(r,...n):0===n.length&&Boolean(r)?[r]:[]}return[]}t.Elements=class{static path(e){let t=[e];for(;e.parentElement;)e=e.parentElement,t.push(e);return t}},t.get=a,t.getAsync=function(e,t){return n(this,void 0,void 0,(function*(){try{const i=yield e();return void 0===i?t:i}catch(e){return t}}))},t.getValue=c,t.getAll=l,t.extract=function(e,t){return s.flatten(t.map((t=>s.clean(s.unique(l(e,...t.split(".")))))))};const d="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void 0!==i?i:Function("return this")();function u(e,t,i,n=(e=>e)){const r=[];let o,s=0;for(;null!=(o=e.exec(t));)r.push(n(t.substring(s,o.index))),r.push(i(o)),s=e.lastIndex;return r.push(n(t.substring(s))),r.join("")}function g(e){return e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}function h(e){return JSON.stringify(o.sort(e))}t.globalThis=d,t.accumulateMultipleValues=function(e,t,i){const n=e[t];return void 0===n?e[t]=i:Array.isArray(n)?-1==n.indexOf(i)&&n.push(i):e[t]=[n,i],e},t.regexReplace=u,t.titleCase=function(e){return u(/\w+/g,e,(e=>g(e[0])))},t.caseWord=g,t.stableJson=h,t.same=function(e,t){return h(e)===h(t)},t.sameIgnoringCase=function(e,t){return h(o.toLowerCase(e))===h(o.toLowerCase(t))},t.limit=function(e,t){return e.slice(0,t)};const p=/\s+/g;return t.cleanSpaces=function(e){return e.trim().replace(p," ")},t.getClassName=function(e){return a((()=>s.last(e.constructor.name.split("$"))),"")},i.exports}.call({});function a(e,t=!0){return e?(0==e.indexOf("?")&&(e=e.substring(1,e.length)),e.split("&").map((function(e){return e.split("=")})).reduce((function(e,i){const n=i[0],r=i[1];if(!n)return e;const o=r?s.get((()=>decodeURIComponent(r.replace(/\+/g,"%20"))),void 0):r,a=t?function(e){try{return JSON.parse(e)}catch(t){return e}}(o):o;return s.accumulateMultipleValues(e,n,a)}),{})):{}}function c(e,t=!0){return Object.keys(s.Objects.removeEmpty(e)).map((i=>{const n=e[i],r=t?function(e){return"string"==typeof e?e:JSON.stringify(e)}(n):n;return`${i}=${encodeURIComponent(r)}`})).join("&")}var l={};Object.defineProperty(l,"__esModule",{value:!0});var d=(u=void 0,l.cache=u);l.caching=d;var u=function(e,t,i){if("function"!=typeof i.value)throw new Error("@cache can only decorate methods");const n=new WeakMap;return Object.defineProperty(e,t,Object.assign(Object.assign({},i),{value:function(...e){const t=JSON.stringify(e),r=function(e){const t=n.get(e);if(t)return t;const i=new Map;return n.set(e,i),i}(this),o=r.get(t);if(void 0!==o)return o;if(r.has(t))return o;const s=i.value.call(this,...e);return r.set(t,s),s}}))};l.cache=u,d=function(e){const t=new Map;return function(...i){const n=JSON.stringify(i),r=t.get(n);if(void 0!==r)return r;if(t.has(n))return r;const o=e(...i);return t.set(n,o),o}},l.caching=d;var g={};Object.defineProperty(g,"__esModule",{value:!0});var h=(f=void 0,v=g.replace=f,g.lazy=v);function p(e,t,i){return Object.defineProperty(e,t,{value:i})}g.container=h;var f=p;function m(e,t,i){if(void 0===i.get)throw new Error("@lazy can only decorate getter methods");return Object.defineProperty(e,t,Object.assign(Object.assign({},i),{get(){return p(this,t,i.get.call(this))[t]}}))}g.replace=f;var y,b,v=m;function w(e=s.globalThis){return e.triptease=e.triptease||{},e.triptease.onboard=e.triptease.onboard||{},{triptease:e.triptease,onboard:e.triptease.onboard}}function k(e,t){return s.get((()=>t.split(".").reduce(((e,t)=>e[t]),e)))}g.lazy=v,h=function(e){return Object.keys(e).reduce(((t,i)=>m(t,i,{configurable:!0,get:()=>e[i](t)})),{})},g.container=h,(b=y||(y={})).Native="native",b.NonNative="non-native",b.NotImplemented="not-implemented";class O{static exposeApi(){const e=w(s.globalThis).triptease;e.native||(e.native=O)}static getProperty(e){const t=k(s.globalThis,e);return(null==(i=t)?y.NotImplemented:"function"==typeof i?i.toString().includes("native code")?y.Native:y.NonNative:y.Native)!==y.NonNative?t:k(O.window,e);var i}static get window(){const e=s.globalThis;try{const t=e.document,i=t.querySelector("[name='triptease.native']");if(i)return i.contentWindow;const n=t.createElement("iframe");return n.style.display="none",n.setAttribute("title","blank"),n.setAttribute("aria-hidden","true"),n.setAttribute("name","triptease.native"),t.documentElement.appendChild(n),n.contentWindow}catch(t){return e}}}t([l.cache,i("design:type",Function),i("design:paramtypes",[String]),i("design:returntype",Object)],O,"getProperty",null),t([g.lazy,i("design:type",Object),i("design:paramtypes",[])],O,"window",null);const E=O.getProperty("console.log"),x=O.getProperty("console.error"),S=O.getProperty("console.debug");class I{constructor(e=E,t=x,i=S||E){this.log=e,this.error=t,this.debug=i}}class C{constructor(){this.log=()=>{},this.error=()=>{},this.debug=()=>{}}}const A="triptease-debug";function j(e,t="triptease-debug"){const i=s.get((()=>{var i;return a(null===(i=e.location)||void 0===i?void 0:i.search,!1)[t]}))||s.get((()=>{var i;return a(new r(null===(i=e.location)||void 0===i?void 0:i.originalHref).query,!1)[t]}))||s.get((()=>{var t,i;return null===(i=null===(t=e.process)||void 0===t?void 0:t.env)||void 0===i?void 0:i.DEBUG}))||s.get((()=>{var i;return(null===(i=e.localStorage)||void 0===i?void 0:i.getItem)&&e.localStorage.getItem(t)}))||s.get((()=>{var i;return(null===(i=e.sessionStorage)||void 0===i?void 0:i.getItem)&&e.sessionStorage.getItem(t)}))||"";return s.get((()=>i.substring(0,256)),"")}function P(e){const t=e.replace(/\./g,"\\.").replace(/\*/g,".*");return new RegExp("^"+t+"$")}function L(e,t=s.globalThis){try{const i=function(e){return j(e,A).split(",").map((e=>e.trim()))}(t),n=i.filter((e=>"!"===e[0])).map((e=>e.substr(1)));return n.length>0?!n.some((t=>P(t).test(e))):i.some((t=>"true"===t||P(t).test(e)))}catch(e){return!1}}class q{constructor(e){this.name=e,this.console=new I}debug(e,...t){this.console.debug(`[${this.name}] ${e}`,...t)}log(e,...t){this.console.log(`[${this.name}] ${e}`,...t)}error(e,...t){this.console.error(`[${this.name}] ${e}`,...t)}}function R(e,t=s.globalThis){return L(e,t)?new q(e):new C}class M{constructor(e,t){this.name=e,this.trackingApi=t,this.logger=R(e)}debug(e,...t){this.logger.debug(e,...t)}error(e,...t){this.logger.error(e,...t);try{this.trackingApi.trackError({name:this.name,message:e,args:t.map((e=>{return _(e)?{name:(t=e).name,message:t.message,stack:t.stack}:e;var t}))})}catch(e){this.logger.error("Failed to track error",e)}}log(e,...t){this.logger.log(e,...t)}}class H{constructor(e,t,i=B,n=R("messaging")){this.listener=e,this.target=t,this.allowedOrigins=i,this.logger=n}addListener(e){this.listener&&this.listener.addEventListener("message",(t=>{this.disallowedOrigin(t)||function(e){try{const{target:t,method:i}=N(e.type);if(t&&i)return!0}catch(e){}return!1}(t.data)&&e(t.data,new H(void 0,t.source||this.target))}))}disallowedOrigin(e){return e.origin&&this.allowedOrigins.length>0&&-1===this.allowedOrigins.indexOf(new r(e.origin).host)}send(e){if(this.target)try{this.target.postMessage(e,"*")}catch(t){this.target.postMessage(JSON.parse(JSON.stringify(e)),"*")}}}const B=["onboard.triptease.io","localhost"],T=/^(.*)\.([^.]+)$/;function N(e){const[,t,i]=e.match(T)||[];return{target:t,method:i}}function D(e){const t={};return function(...i){const n=JSON.stringify(i),r=t[n];return void 0!==r?r:t[n]=e(...i)}}function _(e){return e&&"object"==typeof e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message&&"stack"in e&&"string"==typeof e.stack}function z(e,t,i){return{name:e,message:t,stack:null!=i?i:""}}var F,$,U,W,V,G,J={};function K(e){return e&&"object"==typeof e&&e.constructor===Object&&"string"==typeof e["@type"]}function Z(e,t){return K(e)&&t(e["@type"])}function X(e){return e&&"object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.type&&"string"==typeof e.url}J.isIdentifierSource=function(e){return"object"==typeof e&&"source"in e&&"identifier"in e&&"type"in e},J.isOtherSource=function(e){return"object"==typeof e&&"identifier"in e&&"Other"==e.identifier},J.isStructuredData=K,J.isStructuredDataType=Z,J.isLodgingReservation=function(e){return Z(e,(e=>"LodgingReservation"===e))},J.isClientSideApplication=X,J.PageType=U,(W=U||(F=U={},J.PageType=U,F)).Search="Search",W.RoomsAndRates="RoomsAndRates",W.Confirmation="Confirmation",W.Payment="Payment",W.Group="Group",W.Partial="Partial",W.Unknown="Unknown",J.KernelMode=V,(G=V||($=V={},J.KernelMode=V,$)).Singleton="Singleton",G.ApplicationHost="ApplicationHost",G.DataSource="DataSource";J.BootstrapName="triptease.onboard.bootstrap";J.KernelHostName="triptease.onboard.kernel-host";const Y="triptease.onboard.kernel";J.KernelName=Y,J.isScrapedIdentifiers=function(e){return!!e&&("object"==typeof e&&("integrationId"in e||"clientKey"in e||"apiKey"in e||"identifiers"in e||"type"in e))};class Q{static get(){return s.get((()=>{const e="3976.37119";return"v"+e}),"latest")}}function ee(e){return n(this,void 0,void 0,(function*(){if("undefined"!=typeof fetch){const t=yield fetch(e.url,{method:e.method,headers:e.headers,body:e.body,credentials:e.options&&e.options.credentials?"include":"omit"});return{status:t.status,statusDescription:t.statusText,body:yield t.text()}}{const t=new XMLHttpRequest;return t.open(e.method,e.url,!0),e.headers&&Object.keys(e.headers).forEach((i=>{t.setRequestHeader(i,e.headers[i])})),e.options&&e.options.credentials&&(t.withCredentials=!0),t.send(e.body),new Promise(((e,i)=>{t.addEventListener("load",(i=>{e({status:t.status,statusDescription:t.statusText,body:t.responseText})})),t.addEventListener("error",(e=>{i(e)}))}))}}))}var te,ie;class ne{constructor(e){this.logger=e,this.workers={}}createWorker(e,t){return n(this,void 0,void 0,(function*(){const i=this.workers[e];return i||(this.workers[e]=yield this.create(t,{name:e}))}))}create(e,t){return n(this,void 0,void 0,(function*(){try{return new Worker(e,t)}catch(i){this.logger.debug("Failed to create Worker switching to Blob Worker because:",i.message);const n=`location.originalHref = "${e}";\n`,r=(yield ee({method:"GET",url:e})).body,o=new Blob([n,r],{type:"application/javascript"});return new Worker(URL.createObjectURL(o),t)}}))}}class re{constructor(e,t=R("application-starter"),i=new ne(t),n=new oe(e,t)){this.window=e,this.logging=t,this.workerFactory=i,this.waiter=n}start(e){return n(this,void 0,void 0,(function*(){this.logging.debug(`ApplicationStarter starting app "${e.name}" (${e.type}), ${e.url}`);const t=this.window.document;if("worker"===e.type){const t=yield this.workerFactory.createWorker(e.name,e.url);return e.startMessage&&(yield this.waiter.waitForMessage(e.startMessage,t)),this.logging.debug("ApplicationStarter returning worker"),t}const i=t.createElement(e.type);i.setAttribute("name",e.name),i.src=e.url;const n=re.DefaultOptions[e.type]||{};return Object.keys(n).forEach((e=>{i.setAttribute(e.toLowerCase(),n[e])})),this.addElement(i),e.startMessage?yield this.waiter.waitForMessage(e.startMessage):"script"===e.type&&(yield this.waiter.waitForLoadEvent(i)),i}))}addElement(e){(this.window.document.body||this.window.document.documentElement).appendChild(e)}static create(e){var t;const i=w(e).triptease.onboard;return i.applicationStarter=null!==(t=i.applicationStarter)&&void 0!==t?t:new re(e)}}re.DefaultOptions={script:{defer:"",async:"",crossOrigin:"anonymous"},iframe:{style:"display: none;",sandbox:"allow-scripts allow-same-origin",title:"blank","aria-hidden":"true"}},t([l.cache,i("design:type",Function),i("design:paramtypes",["function"==typeof(te=void 0!==J&&J.ClientSideApplication)?te:Object]),i("design:returntype","function"==typeof(ie="undefined"!=typeof Promise&&Promise)?ie:Object)],re.prototype,"start",null);class oe{constructor(e,t){this.window=e,this.logging=t}waitForLoadEvent(e){return this.logging.debug("MessageWaiter waiting for load/error event for",e),new Promise(((t,i)=>{e.addEventListener("load",t),e.addEventListener("error",(()=>i({name:"ScriptError",message:`Failed to load script "${e.src}"`})))}))}waitForMessage(e,t=this.window){return this.logging.debug("MessageWaiter waiting for message",e),new Promise((i=>{this.logging.debug("MessageWaiter creating handler");const n=r=>{try{const o=r.data&&r.data.type,s=o===e;this.logging.debug(`ApplicationStarter message received "${o}", expecting "${e}", matched: ${s}`),s&&(t.removeEventListener("message",n),i(r.data))}catch(e){this.logging.debug("ApplicationStarter error in parsing message",e,r)}};this.logging.debug("MessageWaiter adding listener"),t.addEventListener("message",n)}))}}const se=O.getProperty("Date");class ae{now(){return new se}}class ce{now(){return new Date}}class le{constructor(e,t=new ce){this.browserWindow=e,this.clock=t}get(e){const t=this.browserWindow.document.cookie.match(new RegExp(`(^| )${e}=([^;]+)`));if(t)return s.get((()=>decodeURIComponent(t[2])))}set(e,t,i,n,r){const o=[`${encodeURIComponent(e)}=${encodeURIComponent(t)}`,i?`; max-age=${i}; expires=${new Date(this.clock.now().getTime()+1e3*i).toUTCString()}`:"",n?"; path="+n:"",r?"; domain="+r:""].join("");this.browserWindow.document.cookie=o}}var de={};Object.defineProperty(de,"__esModule",{value:!0});var ue=(ge=void 0,de.SystemClock=ge);de.StoppedClock=ue;var ge=class{now(){return new Date}};de.SystemClock=ge;ue=class{constructor(e){this.value=e}now(){return this.value}},de.StoppedClock=ue;class he{generate(e){return we(e)()}}function pe(e){const t=new Error(e);return t.source="ulid",t}const fe="0123456789ABCDEFGHJKMNPQRSTVWXYZ",me=fe.length,ye=Math.pow(2,48)-1;function be(e){let t=Math.floor(e()*me);return t===me&&(t=me-1),fe.charAt(t)}const ve=s.globalThis;function we(e=26,t=new de.SystemClock,i=function(e=ve.crypto){return()=>{try{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]/255}catch(e){return Math.random()}}}()){return function(n){return(void 0===n||isNaN(n))&&(n=t.now().getTime()),function(e,t){if(isNaN(e))throw new Error(e+" must be a number");if(e>ye)throw pe("cannot encode time greater than "+ye);if(e<0)throw pe("time must be positive");if(!Number.isInteger(e))throw pe("time must be an integer");let i,n="";for(;t>0;t--)i=e%me,n=fe.charAt(i)+n,e=(e-i)/me;return n}(n,10)+function(e,t){let i="";for(;e>0;e--)i=be(t)+i;return i}(function(e){if(e<10)throw new Error("Length must be at least 10 characters");return e-10}(e),i)}}const ke=we();class Oe{constructor(e,t=new de.SystemClock,i=ee,n=new le(e)){this.browserWindow=e,this.clock=t,this.httpClient=i,this.cookie=n,this.identityDataCookieName="triptease-identity-data",this.identityDataCookieAge=25200,this.domainUserIdName="tt-domain-user-id",this.domainUserIdAge=15768e4}getIdentity(){return n(this,void 0,void 0,(function*(){const e=yield this.httpClient({url:"https://api.triptease.io/identity-service/identity",method:"GET",options:{credentials:!0}}),t=JSON.parse(e.body),i=this.getLocalIdentity();return i&&!0===t.isFreshSession?Object.assign(Object.assign({},i),{domainUserId:this.getOrCreateDomainId()}):(this.storeLocalIdentity(t),Object.assign(Object.assign({},t),{domainUserId:this.getOrCreateDomainId()}))}))}storeLocalIdentity(e){this.cookie.set(this.identityDataCookieName,this.browserWindow.btoa(JSON.stringify(e)),this.identityDataCookieAge,"/")}getLocalIdentity(){const e=this.cookie.get(this.identityDataCookieName);if(e)return JSON.parse(this.browserWindow.atob(e))}getOrCreateDomainId(){try{const e=this.browserWindow.localStorage.getItem(this.domainUserIdName)||this.cookie.get(this.domainUserIdName);if(e)return e}catch(e){}const e=ke();try{this.browserWindow.localStorage.setItem(this.domainUserIdName,e)}catch(e){}return this.cookie.set(this.domainUserIdName,e,this.domainUserIdAge),e}}function Ee(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t}class xe{generate(e){if(void 0!==e)throw new Error("UuidGenerator does not support custom lengths");return Ee().replace(/-/g,"")}}class Se{constructor(e,t){this.messaging=e,this.idGenerator=t}get(e,t,i){return(...e)=>n(this,void 0,void 0,(function*(){const i=this.idGenerator.generate(),{payload:n}=yield this.messaging.handle({type:"triptease.onboard.request",requestType:String(t),payload:e,correlationId:i});if(_(n))throw n;return n}))}}function Ie(e,t=new xe){return new Proxy({},new Se(e,t))}class Ce{constructor(e,t=Ie(e)){this.proxy=t,this.applicationConfig=D((e=>n(this,void 0,void 0,(function*(){return yield this.proxy.applicationConfig(e)})))),this.generateConfig=D((e=>n(this,void 0,void 0,(function*(){return yield this.proxy.generateConfig(e)}))))}}class Ae{constructor(){this.scripts=[]}static create(e){const t=w(e).onboard,i=t.stackScriptFinder;return i||(t.stackScriptFinder=new Ae)}capture(){const e=function(){try{throw new Error}catch(e){if(!e.stack)return;const t=e.stack.match(je);if(!t)return;const i=t[1];return new r(i)}}();e&&this.scripts.push(e)}get(){return this.scripts}}const je=/(https?.*):\d+:\d+/;const Pe={name:"onboard",version:Q.get()};class Le{constructor(e,t,i=R("analytics"),r=50){this.window=e,this.clock=t,this.logger=i,this.batchSize=r,this.queued=[],setInterval((()=>n(this,void 0,void 0,(function*(){return yield this.flush()}))),1e3),this.window.addEventListener("unload",(()=>n(this,void 0,void 0,(function*(){return yield this.flush()}))))}send(e){return n(this,void 0,void 0,(function*(){this.queued.push(function(e,t){return Object.assign({messageId:Ee(),createdAt:e.now()},t)}(this.clock,e)),this.queued.length>this.batchSize&&(yield this.flush())}))}flush(){return n(this,void 0,void 0,(function*(){if(0===this.queued.length)return;const e=this.queued.splice(0,this.batchSize);this.logger.log(`Flushing batch of ${e.length}, remaining in queue ${this.queued.length}`);!function({method:e="POST",url:t,body:i}){const n=JSON.stringify(i);if(void 0!==navigator.sendBeacon&&"POST"===e)navigator.sendBeacon(t,n);else if("undefined"!=typeof fetch)fetch(t,{method:e,body:n});else if(XMLHttpRequest){const i=new XMLHttpRequest;i.open(e,t,!0),i.send(n)}}({url:"https://onboard.triptease.io/message/batch",body:{type:"triptease.onboard.batch",sentAt:this.clock.now(),payload:e}})}))}}const qe=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}\.\d{3}Z)?$/;function Re(e,t,i){if(t(e))return i(e);switch(typeof e){case"undefined":return;case"object":if(null===e)return null;if(Array.isArray(e))return e.map((e=>Re(e,t,i)));if(e.constructor===Object)return s.Objects.keys(e).sort().reduce(((n,r)=>{const o=e[r];return n[r]=Re(o,t,i),n}),{})}return e}function Me(e){return function(e){return Re(e,(e=>"string"==typeof e&&qe.test(e)),(e=>{const t=new Date(e);return isNaN(t.valueOf())?e:t}))}(JSON.parse(e))}class He{static parse(e){return Me(e)}static stringify(e){return JSON.stringify(this.validate(e))}static validate(e){return Re(e,(e=>{const t=typeof e;switch(t){case"undefined":case"string":case"number":case"boolean":return!0;case"object":if(null===e)return!0;if(Array.isArray(e))return!1;if(e.constructor===Object)return!1;if("toJSON"in e)return!0}throw new Error(`Illegal JsonValue: ${t} ${e} `)}),(e=>e))}}class Be{static same(e,t){return He.stringify(e)===He.stringify(t)}static isSuperset(e,t){return null===e||null===t?Be.same(e,t):Array.isArray(e)&&Array.isArray(t)?!(e.length>t.length)&&e.every((e=>t.some((t=>Be.isSuperset(e,t))))):s.get((()=>e.constructor===Object))&&s.get((()=>t.constructor===Object))?Object.keys(e).reduce(((i,n)=>i&&Be.isSuperset(e[n],t[n])),!0):Be.same(e,t)}static compress(e){const t=Be.groupValues(e);return this.compressGrouped(t)}static compressGrouped(e){return Object.entries(e).reduce((({shared:e,unique:t},[i,n])=>{if(s.get((()=>n.constructor===Object))){const r=Be.compressGrouped(n);Object.keys(r.shared).length>0&&(e[i]=r.shared),r.unique.forEach(((e,n)=>{t[n]=t[n]||{},Object.keys(e).length>0&&(t[n][i]=e)}))}return Array.isArray(n)&&n.forEach(((r,o)=>{t[o]=t[o]||{},1===s.Arrays.unique(n.map((e=>He.stringify(e)))).length?e[i]=r:void 0!==r&&(t[o][i]=r)})),{shared:e,unique:t}}),{shared:{},unique:[]})}static groupValues(e){const t=Array.from(e.reduce(((e,t)=>Object.keys(t).reduce(((e,t)=>e.add(t)),e)),new Set)),[i,n]=e.reduce(((e,i)=>t.reduce((([e,t],n)=>{const r=i[n];return s.get((()=>r.constructor===Object))?(t[n]=t[n]||[],t[n].push(r)):(e[n]=e[n]||[],e[n].push(r)),[e,t]}),e)),[{},{}]),r=Object.entries(n).reduce(((e,[t,i])=>(e[t]=Be.groupValues(i),e)),{});return Object.assign(Object.assign({},i),r)}static decompress(e){return e.unique.map((t=>this.merge(e.shared,t)))}static merge(e,t){return[...Object.keys(e),...Object.keys(t)].reduce(((i,n)=>{const r=e[n],o=t[n];return s.get((()=>r.constructor===Object))&&s.get((()=>o.constructor===Object))?i[n]=Be.merge(r,o):i[n]=null!=o?o:r,i}),{})}}function Te(e){return{title:e.document.title,locale:e.document.documentElement.lang||e.document.documentElement.getAttribute("xml:lang")||"",url:e.location.href,urlParsed:Ne(e.location.href),referrer:e.document.referrer,referrerParsed:Ne(e.document.referrer),characterSet:e.document.characterSet,opener:s.get((()=>Boolean(e.opener)),!1)}}function Ne(e){if(!e)return{};const{scheme:t,host:i,path:n,query:o,fragment:c}=new r(e);return s.Objects.removeEmpty({scheme:t,host:i,path:n,query:o,queryParsed:a(o,!1),fragment:c})}class De{constructor(e,t=new ce){this.window=e,this.clock=t;try{this.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){this.timezone=""}}buildMessage(e){return n(this,void 0,void 0,(function*(){const t=s.get((()=>this.window.triptease.onboard.bootstrap.identity),{}),i=this.clock.now();return Be.merge({createdAt:i,messageId:Ee(),anonymousId:s.get((()=>t.anonymousId)),userId:s.get((()=>t.userId)),sessionId:s.get((()=>t.sessionId)),domainUserId:s.get((()=>t.domainUserId)),context:{library:Pe,userAgent:this.window.navigator.userAgent,locale:this.window.navigator.language,page:Te(this.window),screen:{width:this.window.screen.width,height:this.window.screen.height},timezone:this.timezone}},e)}))}}function _e(e){return e&&"object"==typeof e&&"triptease.onboard.request"===e.type&&"string"==typeof e.requestType&&"string"==typeof e.correlationId&&Array.isArray(e.payload)}function ze(e){return e&&"object"==typeof e&&"triptease.onboard.response"===e.type&&"string"==typeof e.correlationId}function Fe(e,t){return{type:"triptease.onboard.response",correlationId:e,payload:t}}function $e(e,t){return Fe(e,z("NotFound","No handler found for "+t))}const Ue=R("messaging");class We{constructor(){this.handlers=new Map}register(e,t){return e.forEach((e=>{if(this.hasHandlerFor(e))throw new Error(`Method name "${e}" already registered to a handler`);this.handlers.set(e,t)})),this}handle(e){return n(this,void 0,void 0,(function*(){const t=this.handlers.get(e.requestType);return t?(Ue.debug("Matched message to handler",e,t),yield t.handle(e)):$e(e.correlationId,e.requestType)}))}hasHandlerFor(e){return this.handlers.has(e)}}const Ve=R("messaging");class Ge{constructor(e){this.target=e}handle(e){return n(this,void 0,void 0,(function*(){const t=this.target[e.requestType];if(!t)return Ve.debug("No method found that matches method",e.requestType,this.target),$e(e.correlationId,e.requestType);try{Ve.debug("Found method",e.requestType);const i=yield t.apply(this.target,e.payload);return Fe(e.correlationId,i)}catch(t){return Ve.debug("Error trying to in invoke method",e.requestType,t),function(e,t){return Fe(e,z(t.name,t.message,t.stack))}(e.correlationId,t)}}))}}function Je(e,...t){const i=s.getAll(e,...t);if(!i)return;const[n]=[...i].reverse();return n}function Ke(e){const t=s.get((()=>function(e){const t=e.hostname.toLowerCase(),i=e.href.toLowerCase(),n=e.pathname.toLowerCase();return"gc.synxis.com"===t?"SynxisV1":"be.synxis.com"===t?"SynxisV2":-1!==t.indexOf("travelclick")?"TravelClick":-1!==t.indexOf("bookingbutton")||-1!==t.indexOf("book-directonline")||-1!==t.indexOf("direct-book.com")?"SiteMinder":-1!==t.indexOf("firmdalehotels")?"Firmdale":-1!==t.indexOf("apxhotelsapartments")||-1!==t.indexOf("mews.li")?"Mews":-1!==t.indexOf("guestline.net")||-1!==t.indexOf("roomlynx.net")?"Guestline":-1!==t.indexOf("theluxcollective.com")||-1!==t.indexOf("luxresorts.com")?"Lux":-1!==t.indexOf("book-onlinenow.net")?"BookOnlineNow":-1!==t.indexOf("windsurfercrs.com")?"SHR":-1!==t.indexOf("leonardo-hotels")?"Leonardo":-1!==t.indexOf("bestwestern.fr")?"BestWesternFrance":-1!==t.indexOf("imperatore.it")?"Imperatore":-1!==t.indexOf("walkerhill.com")?"Walkerhill":-1!==i.indexOf("webrez.com")||-1!==t.indexOf("worldweb.com")||-1!==t.indexOf("webrez.com/v")?"WebRezPro":-1!==t.indexOf("hoteliers.com")?"Hoteliers":-1!==t.indexOf("doylecollection")?"DoyleCollection":-1!==i.indexOf("/bookcore/")?"Roiback":-1!==t.indexOf("nativeplaces.com")?"NativePlaces":-1!==t.indexOf("fattal-hotels")?"Fattal":-1!==i.indexOf("/cgi-bin/lansaweb")?"StationCasinosV1":"www.palms.com"===t?"StationCasinosV2":-1!==t.indexOf(".webhotel.")?"Opera":-1!==t.indexOf("constancehotels.com")?"ConstanceHotels":-1!==t.indexOf("online.bookvisit.")?"BookVisit":-1!==t.indexOf("direct-reservation")?"BusyRooms":-1!==t.indexOf("youngshotels")?"Youngs":"reservations.thekingsburyhotel.com"===t||"bookings.amayaresorts.com"===t?"Hayleys":-1!==t.indexOf("www.secure-res.com")?"Vizergy":-1!==t.indexOf("loewshotels")?"Loews":-1!==i.indexOf("bookings.hamiltonisland.com.au/m/")?"HamiltonIslandMobile":-1!==i.indexOf("bookings.hamiltonisland.com.au/")?"HamiltonIsland":-1!==t.indexOf("regalhotel")?"RegalHotels":-1!==t.indexOf("marinabaysands")?"MarinaBaySands":-1!==t.indexOf("live.high-level-software")?"HighLevelSoftware":-1!==t.indexOf("book.my-rez")?"MyRez":-1!==t.indexOf("premiereserve.com")||-1!==t.indexOf("teg-hotels.com")?"Everly":-1!==t.indexOf("simplebooking")||-1!==t.indexOf("booking.crimsonhotel")?"SimpleBooking":-1!==t.indexOf("bookassist.com")?"BookAssist":-1!==t.indexOf("swissotel.com")?"Swissotel":-1!==t.indexOf("booking.africaalbidatourism.com")?"AfricaAlbida":-1!==t.indexOf("pphotels.com")||-1!==t.indexOf("erez.mmcmg.net")?"PrimePlaza":-1!==t.indexOf("onepagebooking.com")?"HotelNetSolutions":-1!==t.indexOf("reservhotel.com")?"ReserveHotel":-1!==t.indexOf("thorbooking.com")?"ThinkIn":-1!==i.indexOf("/irmng")?"IRM":-1!==t.indexOf("booking-channel.com")?"Hotusa":"www.venetian.com"===t?"Sandsvegas":"bookingresults.com"===t?"Silverbyte":-1!==t.indexOf("clock-software.com")||-1!==t.indexOf("villasriomar.com")?"Clock":-1!==t.indexOf("tajinnercircle.com")||-1!==t.indexOf("tajhotels.com")?"Taj":-1!==t.indexOf("booking.iberostartheclub.com")?"Iberostar":-1!==t.indexOf("services.comwell.com")?"Comwell":-1!==t.indexOf("elinapms.com")?"Elina":-1!==t.indexOf("booking.profitroom.com")?"Profitroom":-1!==t.indexOf("bookingexpert.it")?"Bookingexpert":-1!==t.indexOf("cloud-reservations.net")?"Hart":-1!==t.indexOf("irm1.net")||0===n.indexOf("/irmnet/")?"RDP":-1!==t.indexOf("pr.palaceresorts.com")||-1!==t.indexOf("pr.moonpalace.com")||-1!==t.indexOf("pr.leblancsparesorts.com")?"PalaceResorts":-1!==t.indexOf(".palaceresorts.com")||-1!==t.indexOf(".moonpalace.com")||-1!==t.indexOf(".leblancsparesorts.com")||-1!==t.indexOf(".beachviewbarbados.com")||-1!==t.indexOf(".oceantwobarbados.com")||-1!==t.indexOf(".sea-breeze.com")||-1!==t.indexOf(".southbeachbarbados.com")?"Kognitiv":-1!==t.indexOf(".iqwebbook.com")?"Innquest":-1!==t.indexOf("theguild.co")?"Guild":-1!==t.indexOf(".innroad.com")?"Innroad":-1!==t.indexOf(".furama.com")?"Furama":-1!==t.indexOf(".reztrip.com")?"Reztrip":-1!==t.indexOf("nisekoportfolio.com")?"Bookeasy":-1!==t.indexOf("azimuthotels")&&-1===t.indexOf("reservations")?"Azimut":-1!==t.indexOf(".steigenberger.com")||-1!==t.indexOf(".intercityhotel.com")||-1!==t.indexOf(".maxxhotel.com")||-1!==t.indexOf(".jaz-hotel.com")?"DeutscheHospitality":-1!==t.indexOf(".cloudbeds.com")?"CloudBeds":-1!==t.indexOf("coasthotels.com")?"Amadeus":-1!==t.indexOf(".thehoxton.com")?"Hoxton":-1!==t.indexOf(".lottehotel.com")?"LotteHotel":-1!==t.indexOf("kempinski.com")?"Kempinski":-1!==t.indexOf("derquebooking")?"DerqueBooking":-1!==t.indexOf("ovolohotels.com")?"Ovolo":-1!==t.indexOf(".gleneagles.com")?"Gleneagles":-1!==t.indexOf(".redplanethotels.com")?"RedPlanet":-1!==t.indexOf(".banffjaspercollection.com")||-1!==t.indexOf(".glacierparkcollection.com")?"PursuitCollection":-1!==t.indexOf(".bestwestern.co.uk")?"BestWesternUk":-1!==t.indexOf(".sbe.com")?"Sbe":-1!==t.indexOf(".bode.co")?"Bode":-1!==t.indexOf(".reserve-online.net")?"ReserveOnline":-1!==t.indexOf("secure-hotel-booking.com")?"Availpro":-1!==t.indexOf(".syshotelonline.it")?"SysHotelOnline":-1!==t.indexOf(".reservit.com")?"Reservit":-1!==t.indexOf(".vinpearl.com")?"Vinpearl":-1!==t.indexOf(".omnibees.com")?"Omnibees":-1!==t.indexOf(".hipotels.com")?"Hipotels":-1!==t.indexOf(".handpickedhotels.co.uk")?"HandPickedHotels":-1!==t.indexOf("bookings.zafirohotels.com")?"Zafiro":-1!==t.indexOf(".viatocrs.de")?"Viato":-1!==t.indexOf(".easy-booking.")?"EasyBooking":-1!==t.indexOf("reservas.hotelkokai.com")?"Ezee":-1!==t.indexOf(".innstyle.")?"InnStyle":-1!==t.indexOf(".book-secure.")?"FastBooking":-1!==t.indexOf(".cityexpress.")?"CityExpress":-1!==t.indexOf(".hoteleasyreservations.")?"EasyConsulting":void 0}(e.location)));if(t)return{bookingEngine:t};const i=s.get((()=>function(e){if(e.document.querySelector('link[href*="be.synxis.com"]'))return"SynxisV2";if(s.get((()=>Object.keys(e._GlobalTokens).length),0))return 1==(Boolean(e.document.querySelector("#XbeViewPanel"))?1:2)?"SynxisV1":"SynxisV2";return s.get((()=>-1!==e.process.env.APPLICATION_URL.indexOf("be.synxis.com")),!1)?"SynxisV2":s.get((()=>-1!==e.apiUrl.indexOf("travelclick")),!1)||s.get((()=>!!Je(e.dataLayer,"ihHotelID")),!1)||s.get((()=>!!s.Arrays.find(s.Arrays.from(e.document.querySelectorAll('script[type="text/javascript"]')).map((e=>e.textContent)),(e=>-1!==e.indexOf("travelclick")))),!1)?"TravelClick":s.get((()=>e.document.querySelector('link[href*="vendors~about~booking~cancellation~checkout~confirmation~contact~policies~reservation"]')))||s.get((()=>"Modern"===Je(e.dataLayer,"booking_engine")))||s.get((()=>Je(e.dataLayer,"tbb_prefix")))||s.get((()=>Je(e.dataLayer,"virtual_url")))||s.get((()=>e.document.querySelector('meta[name="occupancy-includes-infants"]')))||s.get((()=>!!e.digitalPartner.triptease))?"SiteMinder":s.get((()=>e.dataLayer.some((e=>e.neobookings))),!1)?"NeoBookings":s.get((()=>"smart"===Je(e.dataLayer,"context.application")),!1)?"Availpro":s.get((()=>Boolean(e.document.querySelectorAll("iframe.mews-distributor").length)),!1)?"Mews":s.get((()=>Boolean(e.WSMAIN)),!1)?"SHR":s.get((()=>0!==s.Arrays.from(e.document.querySelectorAll("script")).filter((e=>-1!==e.src.indexOf("js/ehors"))).length),!1)?"EHORS":s.get((()=>e.document.querySelector("#clienId")),void 0)?"RMSCloud":null!==e.document.querySelector("body#ElinaPBE")?"Elina":null!==e.document.getElementById("bookingGadget")?"GuestCentric":Boolean(e.document.querySelector('div[id^="phMasterBody_"]'))?"UIBScrs":Boolean(e.document.querySelector('script[src*="UiBSJs"]'))?"UIBScrsV2":s.get((()=>Boolean(e.Mirai)),!1)?"Mirai":"paraty"===e.MAIN_SITE?"Paraty":e.document.querySelector('[href^="https://www.booking2hotels.com"]')||e.document.querySelector('.booking-engine img[src*="booking2hotels"]')?"Booking2Hotels":e.document.querySelector('script[src*="seekda"]')?"Seekda":e.document.querySelector('meta[name="author"][content*="alaric"]')?"Alaric":s.get((()=>-1!==e.top.location.hostname.toLowerCase().indexOf("hotel-llevant")),!1)?"Prestige":s.get((()=>-1!==e.document.querySelector('meta[name="description"]').content.indexOf("reztrip")),!1)?"Reztrip":s.get((()=>!!e.PROTELWBE5),!1)?"Protel":s.get((()=>-1!==e.document.title.indexOf("ThinkIn")))||e.RFH_Room_Booking?"ThinkIn":s.get((()=>e.document.querySelector('link[href*="/bookvisit/"]')))?"BookVisit":s.get((()=>e.document.querySelector('link[href*="webhotelier.net"]')))?"ReserveOnline":s.get((()=>e.document.querySelector("#availpro-tracker")))?"Availpro":s.get((()=>e.document.querySelector("meta[name=Author][content*=RESERVIT]")))?"Reservit":s.get((()=>e.document.querySelector("#eZee_BookingContainer, #eZee_BookingHeader, #eZee_BookingFilter, #eZ_BookingRooms")))?"Ezee":s.get((()=>e.document.querySelector("img[src*=hotetec],a[href*=hotetec]")))?"Hotetec":s.get((()=>e.document.querySelector("link[href*=cityexpress]")))?"CityExpress":void 0}(e)));if(i)return{bookingEngine:i};const n=function(e){const t=e.querySelector('script[src*="static.triptease.io/client-integrations/"]');if(!t)return;const i=t.src,n=i.match(/\/([^/]+).js$/);if(!n)return;const r=n[1];return r?{bookingEngine:r.toLowerCase(),originalUrl:i}:void 0}(e.document);return n||(r=e.document,{bookingEngine:s.get((()=>r.querySelector('script[src*="onboard.triptease.io/bootstrap.js"]').src.match(/fallback=([a-zA-Z]+)/)[1]),"Default")});var r}const Ze=Q.get();function Xe(e){return`https://onboard.triptease.io/integrations/${Ze}/${e}.js`}function Ye(e){return`https://integration.triptease.io/client-integrations/platform/${e}.js`}const Qe=[{bookingEngine:"Default",script:Xe("default")},{bookingEngine:"Generic",script:Xe("generic")},{bookingEngine:"SynxisV1",script:Xe("synxis-v1")},{bookingEngine:"SynxisV2",script:Xe("synxis-v2")},{bookingEngine:"TravelClick",script:Xe("travelclick")},{bookingEngine:"iHotelierV2",script:Xe("travelclick")},{bookingEngine:"Firmdale",script:Xe("firmdale")},{bookingEngine:"SiteMinder",script:Xe("siteminder")},{bookingEngine:"Mews",script:Xe("mews")},{bookingEngine:"Guestline",script:Xe("guestline")},{bookingEngine:"Lux",script:Ye("lux")},{bookingEngine:"BookOnlineNow",script:Xe("book-online-now")},{bookingEngine:"SHR",script:Xe("shr")},{bookingEngine:"Leonardo",script:Ye("leonardo")},{bookingEngine:"BestWesternFrance",script:Ye("best-western-france")},{bookingEngine:"Imperatore",script:Ye("imperatore")},{bookingEngine:"Walkerhill",script:Ye("walkerhill")},{bookingEngine:"WebRezPro",script:Xe("webrezpro")},{bookingEngine:"Hoteliers",script:Ye("hoteliers")},{bookingEngine:"RMSCloud",script:Ye("rmscloud")},{bookingEngine:"DoyleCollection",script:Ye("doyle-collection")},{bookingEngine:"Elina",script:Ye("elina")},{bookingEngine:"EHORS",script:Ye("ehors")},{bookingEngine:"UIBScrs",script:Ye("uibscrs")},{bookingEngine:"UIBScrsV2",script:Xe("uibscrs")},{bookingEngine:"Roiback",script:Xe("roiback")},{bookingEngine:"NativePlaces",script:Ye("native-places")},{bookingEngine:"Mirai",script:Xe("mirai")},{bookingEngine:"Fattal",script:Ye("fattal")},{bookingEngine:"Opera",script:Ye("opera")},{bookingEngine:"BookVisit",script:Xe("book-visit")},{bookingEngine:"GuestCentric",script:Xe("guest-centric")},{bookingEngine:"BusyRooms",script:Ye("busy-rooms")},{bookingEngine:"Youngs",script:Xe("youngs")},{bookingEngine:"Hayleys",script:Ye("hayleys")},{bookingEngine:"Hotetec",script:Xe("hotetec")},{bookingEngine:"Vizergy",script:Ye("vizergy")},{bookingEngine:"Loews",script:Xe("loews")},{bookingEngine:"HamiltonIslandMobile",script:Ye("hamilton-island-mobile")},{bookingEngine:"HamiltonIsland",script:Xe("hamiltonisland")},{bookingEngine:"RegalHotels",script:Xe("regal-hotels")},{bookingEngine:"HighLevelSoftware",script:Ye("high-level-software")},{bookingEngine:"MarinaBaySands",script:Ye("marina-bay-sands")},{bookingEngine:"MyRez",script:Ye("my-rez")},{bookingEngine:"Everly",script:Ye("everly")},{bookingEngine:"SimpleBooking",script:Xe("simple-booking")},{bookingEngine:"BookAssist",script:Xe("bookassist")},{bookingEngine:"Swissotel",script:Ye("swissotel")},{bookingEngine:"PrimePlaza",script:Ye("prime-plaza")},{bookingEngine:"HotelNetSolutions",script:Xe("hotel-net-solutions")},{bookingEngine:"ReserveHotel",script:Xe("reserve-hotel")},{bookingEngine:"NeoBookings",script:Xe("neo-bookings")},{bookingEngine:"IRM",script:Ye("irm")},{bookingEngine:"Hotusa",script:Ye("hotusa")},{bookingEngine:"ThinkIn",script:Ye("thinkin")},{bookingEngine:"Sandsvegas",script:Ye("sandsvegas")},{bookingEngine:"Paraty",script:Xe("paraty")},{bookingEngine:"Silverbyte",script:Ye("silverbyte")},{bookingEngine:"Clock",script:Ye("clock")},{bookingEngine:"Iberostar",script:Ye("iberostar")},{bookingEngine:"AfricaAlbida",script:Xe("africa-albida")},{bookingEngine:"ConstanceHotels",script:Xe("constance-hotels")},{bookingEngine:"Comwell",script:Xe("comwell")},{bookingEngine:"Profitroom",script:Xe("profitroom")},{bookingEngine:"Prestige",script:Xe("prestige")},{bookingEngine:"Bookingexpert",script:Xe("bookingexpert")},{bookingEngine:"Booking2Hotels",script:Xe("booking2hotels")},{bookingEngine:"Alaric",script:Xe("alaric")},{bookingEngine:"Hart",script:Xe("hart")},{bookingEngine:"StationCasinosV1",script:Xe("station-casinos-v1")},{bookingEngine:"StationCasinosV2",script:Xe("station-casinos-v2")},{bookingEngine:"RDP",script:Ye("rdp")},{bookingEngine:"Kognitiv",script:Xe("kognitiv")},{bookingEngine:"Innquest",script:Xe("innquest")},{bookingEngine:"Guild",script:Xe("guild")},{bookingEngine:"Seekda",script:Xe("seekda")},{bookingEngine:"Innroad",script:Xe("innroad")},{bookingEngine:"Furama",script:Xe("furama")},{bookingEngine:"GermainHotels",script:Xe("germain-hotels")},{bookingEngine:"Taj",script:Xe("taj")},{bookingEngine:"Reztrip",script:Xe("reztrip")},{bookingEngine:"Bookeasy",script:Xe("bookeasy")},{bookingEngine:"Protel",script:Xe("protel")},{bookingEngine:"Azimut",script:Xe("azimut")},{bookingEngine:"DeutscheHospitality",script:Xe("deutsche-hospitality")},{bookingEngine:"CloudBeds",script:Xe("cloudbeds")},{bookingEngine:"Amadeus",script:Xe("amadeus")},{bookingEngine:"LotteHotel",script:Xe("lotte")},{bookingEngine:"Hoxton",script:Xe("hoxton")},{bookingEngine:"Kempinski",script:Xe("kempinski")},{bookingEngine:"DerqueBooking",script:Xe("derque-booking")},{bookingEngine:"Ovolo",script:Xe("ovolo")},{bookingEngine:"Gleneagles",script:Xe("gleneagles")},{bookingEngine:"RedPlanet",script:Xe("redplanet")},{bookingEngine:"PursuitCollection",script:Xe("pursuit-collection")},{bookingEngine:"BestWesternUk",script:Xe("best-western-uk")},{bookingEngine:"Sbe",script:Xe("sbe")},{bookingEngine:"Bode",script:Xe("bode")},{bookingEngine:"ReserveOnline",script:Xe("reserve-online")},{bookingEngine:"Availpro",script:Xe("availpro")},{bookingEngine:"SysHotelOnline",script:Xe("sys-hotel-online")},{bookingEngine:"Reservit",script:Xe("reservit")},{bookingEngine:"Vinpearl",script:Xe("vinpearl")},{bookingEngine:"Omnibees",script:Xe("omnibees")},{bookingEngine:"Hipotels",script:Xe("hipotels")},{bookingEngine:"HandPickedHotels",script:Xe("hand-picked-hotels")},{bookingEngine:"PalaceResorts",script:Xe("palace-resorts")},{bookingEngine:"Zafiro",script:Xe("zafiro")},{bookingEngine:"Viato",script:Xe("viato")},{bookingEngine:"EasyBooking",script:Xe("easy-booking")},{bookingEngine:"Ezee",script:Xe("ezee")},{bookingEngine:"InnStyle",script:Xe("inn-style")},{bookingEngine:"FastBooking",script:Xe("fast-booking")},{bookingEngine:"CityExpress",script:Xe("city-express")},{bookingEngine:"EasyConsulting",script:Xe("easy-consulting")}].reduce(((e,t)=>(e[et(t.bookingEngine)]={name:t.bookingEngine,url:t.script,type:"script"},e)),{});function et(e){return e.replace("-","").toLowerCase()}const tt=Qe[et("Default")];const it=R("messaging");class nt{constructor(e){this.messageHandler=e,this.promises=new Map,e&&e.addListener((e=>{if(ze(e)){const{correlationId:t}=e,i=this.promises.get(t);i&&(it.debug("Sender matched response",e),i.resolve(e),this.promises.delete(t))}}))}handle(e){return n(this,void 0,void 0,(function*(){return it.debug("Sending request",e),this.messageHandler&&this.messageHandler.send(e),new Promise(((t,i)=>{this.promises.set(e.correlationId,{resolve:t,reject:i})}))}))}}class rt{constructor(e,t,i=R("messaging")){this.listen=e,this.router=t,this.logger=i,this.rules=[],e.addListener(this.handler.bind(this)),this.addRule(_e,(e=>e),(e=>e)),this.addRule(ot,st,at)}registerAlias(e,t){if(!this.router.hasHandlerFor(t))throw new Error(`Illegal alias: Method "${t}" is not registered with router`);return this.addRule((i=e,e=>e.type===i),function(e){return t=>({type:"triptease.onboard.request",requestType:String(e),payload:[t],correlationId:t.correlationId||"fire-and-forget"})}(t),at);var i}handler(e,t){return n(this,void 0,void 0,(function*(){if(ze(e))return;this.logger.debug("listenOn received request",e);const i=this.rules.find((t=>t.predicate(e)));if(!i)return;const n=i.requestConverter(e),r=yield this.router.handle(n);!function(e){return s.get((()=>"NotFound"===e.payload.name),!1)}(r)?e.correlationId&&e.correlationId===r.correlationId&&(this.logger.debug("listenOn sending response to sender",r),t.send(i.responseConverter(r))):this.logger.debug(`Handler not found for request "${n.requestType}", potentially for another listener`)}))}addRule(e,t,i){return this.rules.push({predicate:e,requestConverter:t,responseConverter:i}),this}}function ot(e){return!_e(e)&&!!e.correlationId}function st(e){const{value:t,correlationId:i}=e,{method:n}=N(e.type);return{type:"triptease.onboard.request",requestType:n,payload:[t],correlationId:i}}function at(e){return{type:"triptease.onboard.response",correlationId:e.correlationId,value:e.payload}}function ct(e){const t=j(e,"triptease-applications")||"auto";return s.get((()=>{const[t]=class{static find(e){const t=["bootstrap.js","/paperboy/","/identity-service/confirm"].map((e=>`script[src*="${e}"][src*="triptease.io"]`));t.push('script[src*="triptease.net"]');const i=t.join(", ");return s.Arrays.from(e.querySelectorAll(i)).map((e=>new r(e.src)))}}.find(e.document),{applications:i}=a(t.query);return i}),t).toLowerCase()}var lt,dt;(dt=lt||(lt={})).Config="triptease.config",dt.Error="triptease.onboard.error",dt.Message="triptease.onboard.message",dt.PageDisplayedSearch="triptease.integration.page_displayed_search",dt.PageDisplayedRoomsAndRates="triptease.integration.page_displayed_rooms-and-rates",dt.PageDisplayedConfirmation="triptease.integration.page_displayed_confirmation",dt.PageDisplayedUnknown="triptease.integration.page_displayed_unknown",dt.PageDisplayedGroup="triptease.integration.page_displayed_group",dt.PageDisplayedPartial="triptease.integration.page_displayed_partial",dt.PageErroredRoomsAndRates="triptease.integration.page_errored_rooms-and-rates",dt.PageErroredConfirmation="triptease.integration.page_errored_confirmation",dt.IntegrationData="triptease.integration.integration_data",dt.PartialConfirmationPageData="triptease.integration.partial_confirmation_data",dt.InvalidConfirmationData="triptease.integration.invalid_confirmation_data",dt.InvalidPage="triptease.integration.invalid_page",dt.GenericScript="triptease.integration.generic_script",dt.DataCapture="triptease.integration.data_capture",dt.GenericAnalysisConfirmation="triptease.integration.generic_analysis_confirmation",dt.EntityUpdate="triptease.entity.update",dt.StatusChanged="triptease.onboard.status-changed";class ut{constructor(e,t,i){this.window=e,this.messageBatcher=t,this.messageBuilder=i}get isEnabled(){const e=ct(this.window);return"auto"===e||"analytics"===e}trackConfig(e){return n(this,void 0,void 0,(function*(){this.isEnabled&&(s.get((()=>e.payload.type===U.Payment))||(yield this.messageBatcher.send(s.Objects.removeEmpty(e))))}))}trackEvent(e){return n(this,void 0,void 0,(function*(){this.isEnabled&&(yield this.messageBatcher.send(e))}))}trackError(e){return n(this,void 0,void 0,(function*(){this.isEnabled&&(yield this.messageBatcher.send(yield this.messageBuilder.buildMessage({type:lt.Error,errorType:_(e)?"exception":"console",payload:e})))}))}trackMessage(e){return n(this,void 0,void 0,(function*(){this.isEnabled&&(yield this.messageBatcher.send(yield this.messageBuilder.buildMessage({type:lt.Message,payload:e})))}))}}class gt{constructor(e,t,i=R("integration-executor"),n=re.create(e)){this.window=e,this.kernel=t,this.logger=i,this.starter=n}loadApplications(e){return n(this,void 0,void 0,(function*(){const t=ct(this.window);if("none"===t)return this.logger.log('applications set to "none", skipping loading'),{};const{integrationId:i,clientKey:n,apiKey:r}=e,{applications:o}=yield this.kernel.applicationConfig({integrationId:i,clientKey:n,apiKey:r}),a="auto"===t?o:o.filter((e=>e.name.toLowerCase()===t)),c=a.filter(X);return this.logger.log("load applications",c),yield Promise.all(c.map((e=>s.get((()=>this.starter.start(e)))))),a.reduce(((e,t)=>(e[t.name]=!0,e)),{})}))}static create(e,t){var i;const n=w(e).triptease.onboard;return n.applicationLoader=null!==(i=n.applicationLoader)&&void 0!==i?i:new gt(e,t)}}const ht=R("events");class pt{constructor(e,t){this.timers=e,this.handle=t,this.finders=new Set,this.keepers=new WeakSet,this.handleEvent=e=>n(this,void 0,void 0,(function*(){try{if(ht.debug("Checking for new created items"),0===this.finders.size)return;const t=Array.from(this.finders).flatMap((e=>e()));t.reduce(((e,t)=>this.keepers.has(t)?e:(this.keepers.add(t),!0)),!1)&&(ht.log("Newly created element detected - firing event"),yield this.handle(e))}catch(e){ht.error("CreatedEvents.handleEvent threw while polling",e)}}))}start(){return n(this,void 0,void 0,(function*(){ht.log("Start polling for created items"),this.id=this.timers.setInterval(this.handleEvent,1e3)}))}stop(){return n(this,void 0,void 0,(function*(){ht.log("Stop polling for created items"),this.id&&(this.timers.clearInterval(this.id),this.id=void 0)}))}watch(e){e().forEach((e=>this.keepers.add(e))),this.finders.add(e)}}function ft(e){return new Promise((t=>{this.setTimeout((()=>{t()}),e)}))}class mt{constructor(e=new ce){this.clock=e,this.delay=ft.bind(this),this.delay=ft}task(e){return n(this,void 0,void 0,(function*(){return yield this.delay(0),e()}))}setTimeout(e,t){return setTimeout(e,t)}clearTimeout(e){clearTimeout(e)}setInterval(e,t){return setInterval(e,t)}clearInterval(e){clearInterval(e)}requestIdleCallback(e,t){const i=t?t.timeout:1;let n=this.clock.now().getTime()+i;const r=this;return this.setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(r.clock.now().getTime()-n))})}),i)}cancelIdleCallback(e){this.clearTimeout(e)}}new mt;const yt=R("events");class bt{constructor(e,t){this.window=e,this.delegate=t,this.first=!0,this.fire=e=>n(this,void 0,void 0,(function*(){!this.window.document.hidden||this.first?(yield this.delegate.fire(),this.first=!1):yt.log("Document hidden - skipping",e)}))}listen(e){return n(this,void 0,void 0,(function*(){yield this.delegate.listen(e)}))}removeListener(e){this.delegate.removeListener(e)}}const vt=R("events");class wt{constructor(e,t){this.delegate=e,this.running=t,this.fire=e=>n(this,void 0,void 0,(function*(){this.running.value?vt.log("Already running - skipping",e):(this.running.value=!0,yield this.delegate.fire(),this.running.value=!1)}))}listen(e){return n(this,void 0,void 0,(function*(){if(yield this.delegate.listen(e),this.running.value){vt.log("Already running - firing immediately");try{yield e()}catch(e){vt.log(e)}}}))}removeListener(e){this.delegate.removeListener(e)}}const kt=R("events");class Ot{constructor(){this.handlers=[],this.fire=e=>n(this,void 0,void 0,(function*(){kt.log(`Firing handlers(${this.handlers.length})`,e),yield Promise.all(this.handlers.map((e=>n(this,void 0,void 0,(function*(){try{yield e()}catch(e){kt.log("Error while firing handler",e)}})))))}))}listen(e){return n(this,void 0,void 0,(function*(){this.handlers.push(e)}))}removeListener(e){this.handlers=this.handlers.filter((t=>t!==e))}}const Et=R("events");class xt{constructor(e,t){this.timers=e,this.delegate=t,this.timeoutMs=1e3,this.timerId=0,this.fire=e=>n(this,void 0,void 0,(function*(){Et.log(`Event observed, waiting for ${this.timeoutMs} ms quiet`,e),this.timers.clearInterval(this.timerId),this.timerId=this.timers.setTimeout((()=>n(this,void 0,void 0,(function*(){Et.log("Event quiet period ended, firing event",e),yield this.delegate(e)}))),this.timeoutMs)}))}}const St=R("events");class It{constructor(e,t,i=.2,r=new mt){this.handle=e,this.running=t,this.idleThreshold=i,this.timers=r,this.lastState=!1,this.busy=!1,this.average=new Ct,this.idleHandler=e=>{const t=e.timeRemaining();this.running.value?this.busy=!1:0===t?this.busy=!0:(this.average=this.average.calculate(t),this.busy=this.average.percentage<-this.idleThreshold),this.busy?this.idleId=void 0:this.idleId=this.timers.requestIdleCallback(this.idleHandler,0===t?void 0:{timeout:t})},this.intervalHandler=()=>n(this,void 0,void 0,(function*(){this.stateHasChanged()&&this.isIdle()&&(St.log("Browser idle"),yield this.handle("Idle")),this.average=new Ct,this.lastState=this.busy,this.idleId||(this.idleId=this.timers.requestIdleCallback(this.idleHandler))}))}start(){return n(this,void 0,void 0,(function*(){this.intervalId=this.timers.setInterval(this.intervalHandler,1e3),this.idleId=this.timers.requestIdleCallback(this.idleHandler)}))}stop(){return n(this,void 0,void 0,(function*(){this.intervalId&&this.timers.clearInterval(this.intervalId),this.idleId&&this.timers.cancelIdleCallback(this.idleId)}))}isIdle(){return!this.busy}stateHasChanged(){return this.lastState!==this.busy}}class Ct{constructor(e=0,t=0,i=0,n=0){this.value=e,this.count=t,this.difference=i,this.percentage=n}calculate(e){const t=this.count+1,i=e-this.value,n=i/this.value,r=this.value+i/t;return new Ct(r,t,i,n)}}class At{constructor(e,t){this.window=e,this.handle=t}start(){return n(this,void 0,void 0,(function*(){this.window.addEventListener("visibilitychange",this.handle),this.window.addEventListener("popstate",this.handle),this.window.addEventListener("hashchange",this.handle),this.window.addEventListener("pageshow",this.handle),this.window.addEventListener("pagehide",this.handle),"complete"!==this.window.document.readyState?this.window.document.addEventListener("DOMContentLoaded",this.handle):yield this.handle("Document already loaded")}))}stop(){return n(this,void 0,void 0,(function*(){this.window.removeEventListener("visibilitychange",this.handle),this.window.removeEventListener("popstate",this.handle),this.window.removeEventListener("hashchange",this.handle),this.window.removeEventListener("pageshow",this.handle),this.window.removeEventListener("pagehide",this.handle),this.window.document.removeEventListener("DOMContentLoaded",this.handle)}))}}class jt{constructor(){this.value=!1}}class Pt{constructor(e,t=new mt){this.window=e;const i=new jt;this.sink=new bt(e,new wt(new Ot,i)),this.fire=new xt(t,this.sink.fire).fire,this.mutation=new Rt(this.fire),this.created=new pt(t,this.fire),this.sources=[new It(this.fire,i),this.mutation,this.created,new At(e,this.fire)]}watch(e){this.created.watch(e)}listen(e){return n(this,void 0,void 0,(function*(){yield this.sink.listen(e)}))}start(){return n(this,void 0,void 0,(function*(){yield Promise.all(this.sources.map((e=>e.start())))}))}stop(){return n(this,void 0,void 0,(function*(){this.sources.forEach((e=>e.stop()))}))}removeListener(e){this.sink.removeListener(e)}}function Lt(e){const t=w(e).triptease;return t.events=t.events||new Pt(e)}const qt={characterData:!0,attributes:!0,childList:!0};class Rt{constructor(e){this.handle=e,this.observer=new MutationObserver(this.handle)}start(){return n(this,void 0,void 0,(function*(){}))}stop(){return n(this,void 0,void 0,(function*(){this.observer.disconnect()}))}static observe(e,t=qt){if(!("MutationObserver"in s.globalThis))return e;const i=Lt(s.globalThis).mutation;return e instanceof HTMLInputElement||e instanceof HTMLSelectElement?e.addEventListener("change",i.handle):i.observer.observe(e,t),e}}R("messaging");const Mt="triptease-anonymous-id";class Ht{constructor(e){this.storage=e}getAnonymousIds(){return n(this,void 0,void 0,(function*(){const e=this.storage.get(Mt);return e?[e]:[]}))}setAnonymousId(e){return n(this,void 0,void 0,(function*(){this.storage.set(Mt,e)}))}}class Bt{constructor(e){this.providers=e}static create(...e){return new Bt(e)}getAnonymousIds(){return n(this,void 0,void 0,(function*(){return s.Arrays.flatten(yield Promise.all(this.providers.map((e=>s.get((()=>e.getAnonymousIds()),[]))))).sort()}))}setAnonymousId(e){return n(this,void 0,void 0,(function*(){yield Promise.all(this.providers.map((t=>s.get((()=>t.setAnonymousId(e))))))}))}}class Tt{constructor(e,t=new he){this.delegate=e,this.generator=t}getAnonymousIds(){return n(this,void 0,void 0,(function*(){const e=(yield this.delegate.getAnonymousIds())[0]||this.generator.generate();return yield this.delegate.setAnonymousId(e),[e]}))}setAnonymousId(e){return this.delegate.setAnonymousId(e)}}class Nt{constructor(e,t=new mt,i=1e3){this.delegate=e,this.timers=t,this.delay=i}getAnonymousIds(){return Promise.race([this.delegate.getAnonymousIds(),this.timers.delay(this.delay).then((()=>Promise.resolve([])))])}setAnonymousId(e){return n(this,void 0,void 0,(function*(){yield Promise.race([this.delegate.setAnonymousId(e),this.timers.delay(this.delay).then((()=>Promise.resolve([])))])}))}}class Dt{constructor(e){this.storage=e}get(e){const t=this.storage.getItem(e);if(t)return Me(t)}set(e,t){return this.storage.setItem(e,JSON.stringify(t)),this}clear(){this.storage.clear()}}class _t{constructor(){this.data=new Map}get(e){return this.data.get(e)}set(e,t){return this.data.set(e,t)}clear(){this.data.clear()}}class zt{constructor(e,t=new ae,i=Lt(e),r=new De(e),o=new Le(e,t),s=new ut(e,o,r),a=new M("bootstrap",s),c=re.create(e),l=new oe(e,a),d=new Oe(e,t),u=Ae.create(e)){this.window=e,this.clock=t,this.events=i,this.messageBuilder=r,this.messageBatcher=o,this.trackingApi=s,this.logger=a,this.starter=c,this.waiter=l,this.identityHelper=d,this.stackScripts=u,this.integrate=()=>n(this,void 0,void 0,(function*(){try{this.logger.log("Starting integrate()");const e=Ke(this.window);w(this.window).onboard.bookingEngine=e.bookingEngine;const t=function({bookingEngine:e,originalUrl:t}){return Qe[et(e)]||(t?function(e,t){return{name:e,url:t.replace("static.triptease.io","integration.triptease.io"),type:"script"}}(e,t):tt)}(e);yield this.starter.start(t)}catch(e){this.logger.error("Bootstrap.integrate: unhandled exception",e)}})),w(this.window).onboard.bootstrap=this}start(){return n(this,void 0,void 0,(function*(){try{this.logger.debug("Bootstrap starting"),O.exposeApi(),this.stackScripts.capture();const[e,t]=yield Promise.all([this.identityHelper.getIdentity(),this.kernelFrame()]);this.identity=e;const i=t.contentWindow;if(!i)return void this.logger.log("Kernel frame did not generate a content window, aborting");const r=new H(this.window,i,[...B,this.window.location.hostname]),o=new nt(r);this.kernel=new Ce(o),this.kernelHost=Ie(o),new rt(r,(new We).register(["processEvent"],new Ge(this)).register(["trackConfig","trackEvent","trackError","trackMessage"],new Ge(this.trackingApi))).registerAlias("triptease.event","processEvent").registerAlias("triptease.config","trackConfig"),gt.create(this.window,this.kernel),s.getAsync((()=>n(this,void 0,void 0,(function*(){this.identityProvider=new Tt(Bt.create(new Ht(s.get((()=>new Dt(window.localStorage)),new _t)),new Nt(this.kernelHost)));const[e]=yield this.identityProvider.getAnonymousIds();this.identity.anonymousId=e,this.logger.log("anonymousId",e)})))),yield this.events.listen(this.integrate),yield this.events.start()}catch(e){this.logger.error("Bootstrap.start: unhandled exception",e)}}))}reload(){return n(this,void 0,void 0,(function*(){this.logger.debug("Bootstrap reloading"),this.stackScripts.capture(),yield this.integrate()}))}kernelFrame(){return n(this,void 0,void 0,(function*(){const e=class{static application(e){const t=function(e=s.globalThis){const t=j(e,A);return s.Strings.isEmpty(t)?"":c({[A]:t})}();return{name:Y,url:`https://onboard.triptease.io/kernel/${Q.get()}/kernel-host.html?originHost=${e}${t?"&"+t:""}`,type:"iframe",startMessage:"triptease.onboard.kernel-host-started"}}}.application(this.window.location.hostname);return yield this.starter.start(e)}))}processEvent(e){return n(this,void 0,void 0,(function*(){const t=yield this.kernelHost.getPageState(),i=yield this.messageBuilder.buildMessage(Be.merge(e,t));yield this.trackingApi.trackEvent(i)}))}}const Ft=R("bootstrap"),$t=s.get((()=>window.triptease.onboard.bootstrap));n(void 0,void 0,void 0,(function*(){$t?(Ft.log("Bootstrap reloading"),yield $t.reload()):(Ft.log("Creating new bootstrap"),yield new zt(window).start())}))}();